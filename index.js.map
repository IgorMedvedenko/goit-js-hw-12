{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '48410810-6cc12cd8ef8f80f7e97e53d15';\n\nexport async function searchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Image search error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const loaderContainer = document.querySelector('.loader-container');\n\n  loaderContainer.style.display = 'none';\n  loadMoreBtn.style.display = 'none';\n\n  if (images.hits.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n\n    return false;\n  }\n\n  const imageMarkup = images.hits\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n      <div class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"image-info\">\n          <p>Likes: ${image.likes}</p>\n          <p>Views: ${image.views}</p>\n          <p>Comments: ${image.comments}</p>\n          <p>Downloads: ${image.downloads}</p>\n        </div>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageMarkup);\n\n  if (lightbox) {\n    lightbox.destroy();\n  }\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  if (images.totalHits > images.hits.length) {\n    loadMoreBtn.style.display = 'block';\n  } else {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n\nexport function showLoader() {\n  const loaderContainer = document.querySelector('.loader-container');\n  loaderContainer.style.display = 'block';\n}\nexport function hideLoader() {\n  const loaderContainer = document.querySelector('.loader-container');\n  loaderContainer.style.display = 'none';\n}\n","import { searchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\n\nlet currentQuery = '';\nlet currentPage = 1;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchForm = document.querySelector('.search-form');\n  const searchInput = document.querySelector('.search-input');\n  const loadMoreBtn = document.querySelector('.load-more');\n\n  searchInput.addEventListener('focus', () => {\n    searchInput.classList.add('pressed');\n  });\n\n  searchInput.addEventListener('blur', () => {\n    searchInput.classList.remove('pressed');\n  });\n\n  searchForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const searchInput = event.target.elements.searchInput;\n    const query = searchInput.value.trim();\n\n    if (!query) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Please enter a search query',\n      });\n      return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n\n    clearGallery();\n    showLoader();\n    loadMoreBtn.style.display = 'none';\n\n    try {\n      const images = await searchImages(query, currentPage);\n      const hasImages = renderImages(images);\n\n      if (hasImages) {\n        loadMoreBtn.style.display = 'block';\n      }\n    } catch (error) {\n      console.error('Search error:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images',\n      });\n    } finally {\n      hideLoader();\n      searchInput.value = '';\n      searchInput.classList.remove('pressed');\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n\n    try {\n      const images = await searchImages(currentQuery, currentPage);\n      const hasImages = renderImages(images);\n\n      if (hasImages) {\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n          const cardHeight = galleryItem.getBoundingClientRect().height;\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Load more error:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to load more images',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n});\n"],"names":["BASE_URL","API_KEY","searchImages","query","page","params","axios","error","lightbox","clearGallery","gallery","renderImages","images","loadMoreBtn","loaderContainer","iziToast","imageMarkup","image","SimpleLightbox","showLoader","hideLoader","currentQuery","currentPage","searchForm","searchInput","event","galleryItem","cardHeight"],"mappings":"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"}